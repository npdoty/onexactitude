<!DOCTYPE html>
<head>
	<script src="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.js"></script>
	<script type="text/javascript" src="http://maps.stamen.com/js/tile.stamen.js?v1.2.3"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.css" />
	<style type="text/css" media="screen">
		#map {
			height: 100%;
			padding: 0;
			margin: 0;
		}
		html, body {
			height: 100%;
			padding: 0;
			margin: 0;
		}
	</style>
	<script type="text/javascript" charset="utf-8">
		$(function() {
			window.map = L.map('map').setView([37, -122], 13);
			var layer = new L.StamenTileLayer("terrain");
			window.map.addLayer(layer);			
			
			var jsonLayer = L.geoJson().addTo(map);	// empty GeoJSON layer to start with
			
			layer.on('tileload', function(e) {
				// load JSON tiles at appropriate zoom/tile locations courtesy of this gist:
				//   https://gist.github.com/pkorac/5287314
				var title = e.url.split("/");
				var z = title[title.length-3];
				var x = title[title.length-2];
				var y = title[title.length-1].split(".")[0];
				
				// Construct the json string out of the z, x and y
				var jsonString = "http://tile.openstreetmap.us/vectiles-highroad/" + z + "/" + x + "/" + y + ".json";
				$.getJSON( jsonString, function(json){
				// if there is json data, it will be loaded, otherwise we just get nothing
				// Add this data to the jsonLayer
					jsonLayer.addData(json);
				} );
			});
			
			window.map.on("zoomend", function(){
				jsonLayer.clearLayers();	// remove GeoJSON from other zoom layer when requesting new data
			});
		});
	</script>
</head>
<body>
	<div id="map"></div>
</body>